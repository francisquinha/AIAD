\documentclass[12pt]{report}
\usepackage[utf8]{inputenc}
\usepackage[portuguese]{babel}

\usepackage{graphicx}
\usepackage{tabularx}
\usepackage[section]{placeins}
\usepackage{hyperref}

\pagenumbering{arabic}

\begin{document}

  \begin{titlepage}
    \begin{center}
        \vspace*{1cm}
        
        \Huge
        \textbf{T05: Exploração de Marte}
        \vspace{0.5cm} \ \\
        \LARGE
        Agentes e Inteligência Artificial Distribuída
        
        \vfill
        
	\includegraphics[width=0.6\textwidth]{FEUP_Logo}
	\break
        \small
        Novembro 2016
        
        \vfill
        
	\vspace{1.5cm}
        \normalsize{
	  Marina Camilo - up201307722 - up201307722@fe.up.pt \\
	  Diogo Ferreira - up201502853 - diogoff@fe.up.pt \\
	  Ângela Cardoso - up200204375 - angela.cardoso@fe.up.pt
        }
        
    \end{center}
  \end{titlepage}

\newpage
\tableofcontents

\clearpage
\chapter{Enunciado}

\section{Descrição do cenário}
No âmbito da unidade curricular de Agentes e Inteligência Artificial Distribuída, o nosso grupo propôs-se a implementar um Sistema Multi-Agente para simulação de um cenário de extração de minérios em Marte. Para tal, é necessário descobrir os minérios, extraí-los e transportá-los para a base. Sendo assim, no nosso sistema existem três tipos de Agentes:

\begin{itemize}
  \item \emph{Spotter} – Procura fontes de minérios e inspeciona-as para determinar se podem ser exploradoas. 
  \item \emph{Producer} – É chamado a uma fonte de minério por um \emph{spotter} para extrair o máximo de minério possível nessa fonte. 
  \item \emph{Transporter} – É alocado pelo \emph{producer} para carregar o minério obtido para a base.
\end{itemize}

De forma a facilitar a procura, todos os agentes podem localizar fontes de minérios e enviar a sua localização para os \emph{spotter} que os analisarão. A escolha do \emph{producer} por parte do \emph{spotter} segue um protocolo de negociação. A alocação dos \emph{transporters} a uma determinada fonte segue também um protocolo de negociação, iniciado pelo \emph{producer}. Esta alocação, terá em conta a quantidade de minério a transportar, de modo a determinar mais corretamente o número necessário de \emph{transporters}.

\section{Objectivos do trabalho}

Um dos objetivos deste trabalho é implementar os agentes de forma a que a simulação da exploração seja tão eficiente quanto possível. Para tal serão estudadas várias alternativas de implementação, de forma a determinar qual a melhor abordagem. No caso dos agentes do tipo \emph{spotter}, tencionamos usar algoritmos de distribuição do espaço a explorar entre eles, para que cubram toda a região mais rapidamente. Em relação aos \emph{producers} e \emph{transporters}, pretendemos instalar protocolos de negociação que garantam que o melhor agente é escolhido para a tarefa.

O nosso maior objetivo é utilizar este projeto como forma de melhor interiorizar os conceitos dos Sistemas Multi-Agente, nomeadamente ganhando uma maior familiaridade com as plataformas que permitem implementar e simular estes sistemas.

\section{Resultados esperados e forma de avaliação}

Para podermos ver resultados mais rapidamente, inicialmente serão implementadas apenas as funcionalidades mais básicas de cada tipo de agente. Como tal, a primeira fase de avaliação preocupar-se-á essencialmente em garantir que cada agente faz aquilo que é suposto.

Numa segunda fase, introduziremos as restrições pretendidas para a simulação, nomeadamente a capacidade limitada dos \emph{transporters} e o facto de todos os agentes poderem detetar minério nas suas deambulações. Uma vez realizadas estas alterações aos agentes básicos, a avaliação geral levará em conta o tempo que a simulação demora a correr e o número de passos efetuados por todos os agentes. Usando estas métricas, dados vários tamanhos para o espaço inicial a explorar, iremos determinar a complexidade do nosso sistema. Para podermos melhorar cada componente individual, calcularemos também métricas mais finas, como o tempo de espera médio e máximo, quando é invocado um \emph{producer} ou um \emph{transporter}, ou o tempo de exploração do terreno pelos \emph{spotters} consoante o seu número.

Com as métricas obtidas após a segunda fase de implementação, analisaremos diferentes algoritmos de forma a tornar mais eficiente esta demanda. Nomeadamente, avaliaremos qual a alocação mais eficiente de agentes, se o mapa fica corretamente dividido entre os \emph{spotters} e se o tempo de simulação foi o mínimo para o caso em questão.


\chapter{Plataforma/Ferramenta}

\section{Para que serve}

  \subsection{JADE}
  O JADE, \emph{Java Agent DEvelopment Framework}, é um software que permite desenvolver sistemas baseados em agentes. Os agentes são distribuídos por \emph{containers} que podem estar em máquinas diferentes, cada um utiliza uma \emph{thread}. 

  \subsection{Repast 3}
  O Repast, \emph{Recursive Porous Agent Simulation Toolkit}, é uma ferramenta de simulação baseada em agentes, que permite construir simulações locais à máquina com diversos agentes. O processamento de cada agente é distribuído por \emph{threads}.

  \subsection{SAJaS}
  O SAJaS, \emph{Simple API for JADE-based Simulations}, é uma ferramenta que se propõe servir de ponte entre o desenvolvimento e a simulação de Sistemas Multi-Agente. Desta forma, através do SAJaS, podemos tomar vantagem dos benefícios do JADE e do Repast.

\section{Descrição das características principais}

  \subsection{JADE}
  O JADE é uma ferramenta totalmente escrita em JAVA, que suporta troca de mensagens ACL, seguindo a especificação FIPA. Além disso, possui um sistema de gestão de agentes e um sistema de páginas amarelas. Como os agentes estão distribuídos por contentores que podem estar em máquinas diferentes, permite ter agentes remotos. Os agentes podem migrar entre contentores e ser clonados. Esta plataforma possui ainda uma série de ferramentas que simplificam a administração e o desenvolvimento de aplicações, tais como:
  \begin{itemize}
   \item agente de monitorização remota - interface gráfico para monitorar a atividade dos agentes;
   \item agente pateta - permite trocar mensagens com outros agentes;
   \item agente inspetor - permite inspecionar outros agentes;
   \item agente introspectivo - permite monitorar o ciclo de vida de um agente.
  \end{itemize}
  A implementação de agentes em JADE é feita recorrendo a comportamentos, que determinam as tarefas a executar pelos agentes consoante o contexto. 
  
  \subsection{Repast 3}
  O Repast 3 suporta simulação de espaços físicos, representação 2D e 3D e análise em tempo real. Possui uma barra de ferramentas para controlar as simulações, um interface gráfico para manipular os parâmetros. Permite recolher dados em vários formatos, incluindo vários tipos de gráficos. A interação entre os agentes pode ser visualizada graficamente. Os espaços físicos simulados podem ser de variados tipos, como por exemplo, grelhas hexagonais ou retangulares, espaços contínuos ou redes. Além de poderem ser corridas com recurso ao interface gráfico, as simulações podem também ser lançadas em \emph{batch}.
  
  O simulador discreto considera unidades de tempo (\emph{ticks}) ou passos. Os eventos são planeados para ocorrer em \emph{ticks} específicos e assim é respeitada a ordem dos acontecimentos. Uma simulação considera um conjunto de agentes, cujos comportamentos são controlados recorrendo ao plano.

  \subsection{SAJaS}
  O SAJaS permite construir um Sistema Multi-Agente tal como é feito em JADE, existindo até uma ferramenta (MASSim2Dev) que traduz código JADE para SAJaS (e vice-versa), alterando as classes importadas. Ao contrário do JADE, permite ainda, recorrendo para isso ao Repast, a simulação deste tipo de sistemas. Além disso, o SAJaS permite ainda obter melhores performances do que numa simulação construída em JADE, que teria que considerar algum tipo de agente representado o `mundo'.

\section{Realce das funcionalidades relevantes para o trabalho}

Com o suporte do JADE são feitos os protocolos de comunicação entre os diferentes agentes, utilizando mensagens ACL. Usando o Repast 3 torna-se
fácil simular um espaço físico, popular o espaço com os agentes construídos em JADE, desenhá-los e finalmente vê-los em ação, obtendo gráficos relativos à sua performance. O SAJaS permite-nos recorrer a estas duas ferramentas simultaneamente, construindo e simulando o nosso sistema de forma eficiente.

\chapter{Especificação}
%escrever aqui
\section{Identificação e caracterização dos agentes (arquitectura, comportamento, estratégias)}
%escrever aqui

\section{Protocolos de interacção}

\subsection{Divisão de espaços}
Inicialmente cada \emph{spotter} deve comunicar e acordar com os restantes \emph{spotters} o espaço reservado para este explorar.
É assumido que o espaço físico se trata sempre de uma matriz quadrada.

\begin{figure}[h]
  \centering
    \includegraphics[width=0.6\textwidth]{spotter-spaces}
  \caption{\small{Alocação simples por linhas}}
\end{figure}

Inicialmente o espaço é divido por linhas e repartido pelos diferentes \emph{spotters}. Estes ficam encarregues de confirmar esta
afetação com os \emph{spotters} restantes.

\begin{figure}[h]
  \centering
    \includegraphics[width=0.6\textwidth]{spotter-agreement}
  \caption{\small{Diagrama temporal das comunicações entre \emph{spotters}}}
  
  \begin{enumerate}
    \item Spotter1 comunica ao restantes \emph{spotters} o espaço que este pretende explorar.
    \item Spotter1 recebe confirmação dos \emph{spotters} e fica afecto ao espaço que o mesmo pretendia.
    \item Spotter3 comunica ao restantes \emph{spotters} o espaço que este pretende explorar.
    \item Spotter2 comunica ao restantes \emph{spotters} o espaço que este pretende explorar.
    \item Spotter3 recebe confirmação dos \emph{spotters} e fica afecto ao espaço que o mesmo pretendia.
    \item Spotter2 recebe confirmação dos \emph{spotters} e fica afecto ao espaço que o mesmo pretendia.
  \end{enumerate}
\end{figure}

\FloatBarrier
\newpage
\subsection{Afetação de Producers}
Uma vez encontrado minério é necessário chamar um \emph{producer} para o extrair. O \emph{spotter} envia então a posição do 
minério a todos os \emph{producers} e espera que lhe respondam com um valor indicante do esforço necessário a cada \emph{producer}.
O \emph{spotter} escolhe o \emph{producer} com o menor esforço e comunica de novo pedindo para confirmar a afetação do mesmo.
Caso seja recusado, porque o \emph{producer} foi afeto a outro minério entretanto, o \emph{spotter} pede de novo o valor do esforço
e repete o processo anterior.

\begin{figure}[h]
  \centering
    \includegraphics[width=0.8\textwidth]{producer-scheduling}
  \caption{\small{Exemplo de afetação de \textit{Producers}}}
\end{figure}

Os \emph{producers} guardam numa \emph{queue} os diferentes minérios que vão extrair. Com esta \emph{queue} o calculo do esforço
para extrair um minério baseia-se em somar a distância entre cada um dos minérios, a distância do ponto corrente para o primeiro
minério e a distância do ultimo minério ao potencial minério.

\FloatBarrier
\newpage
\subsection{Afetação de Transporters}
Após a extração do minério é necessário transportá-lo para a nave-mãe. O \emph{producer} que acabou de extrair o minério tem que selecionar 
um \emph{transporter}, do mesmo modo que o \emph{spotter} seleciona um \emph{producer}. Cada \emph{transporter} comunica o valor
do esforço e o minério que consegue transportar possibilitando o \emph{producer} de escalonar os diferentes agentes.

\begin{figure}[h]
  \centering
    \includegraphics[width=0.8\textwidth]{transporter-scheduling}
  \caption{\small{Exemplo de afetação de \textit{Transporters}}}
\end{figure}

%escrever aqui
\newpage
\section{Faseamento do projecto}

\begin{table}[htb]
\centering
\caption{Fases previstas para o projecto}
    \sffamily \begin{tabularx}{1.0\textwidth}{ p{3cm}  p{10,5cm} }
    \hline
    \textbf{1º Ponto} \hfill & Construir ambiente de simulação na tecnologia \emph{Repast} \\ \hline
    \textbf{2º Ponto} \hfill & Criação do \emph{spotter} com as função de explorar e dividir território a explorar. \\ \hline
    \textbf{3º Ponto} \hfill & Criação do \emph{producer} com a função básica de produzir. Melhoramento do \emph{spotter} para chamar \emph{producers}. \\ \hline
    \textbf{4º Ponto} \hfill & Criação do \emph{transporter} sem limite de capacidade e apenas com a função básica de transportar. Melhoramento do \emph{producer} para chamar \emph{transporters}. \\ \hline
    \textbf{5º Ponto} \hfill & Melhoria dos Agentes \emph{spotter}, \emph{producer} e \emph{transporter}. \\ \hline
    \textbf{6º Ponto} \hfill & Defenir estratégias de forma a tornar a exploração de Marte o mais eficiente possível. \\ \hline
    \end{tabularx} \normalfont
\end{table}

\chapter{Recursos}
%escrever aqui
\section{Bibliografia}
%escrever aqui
\section{Software}
%escrever aqui

\end{document}